import{r as t,q as _,v as w,j as e,$ as C,m as f}from"./app-DKcAQ6_-.js";import R from"./Header-BRF3mAJO.js";import D from"./Sidebar-BKfS1058.js";import"./Dropdown-CQjxdwPE.js";import"./transition-D9AalLht.js";function $({category:s}){const d=t.useRef(),i=t.useRef(),x=t.useRef(),[r,c]=t.useState(s!=null&&s.image?`/uploads/${s.image}`:null),[g,p]=t.useState(""),{errors:m}=_().props,{data:n,setData:o,progress:u}=w({name:(s==null?void 0:s.name)||"",image:null}),j=l=>{const a=l.target.files[0];if(!a)return;const N=a.name.split(".").pop().toLowerCase();if(!["gif","png","jpg","jpeg"].includes(N)){p("Not an image...");return}p(""),o("image",a),i.current.classList.add("file_uploading"),setTimeout(()=>{i.current.classList.add("file_uploaded")},500);const b=URL.createObjectURL(a);setTimeout(()=>{c(b)},500)},v=()=>{c(null),o("image",null),d.current.value=null,i.current.classList.remove("file_uploading","file_uploaded")},h=l=>{l.preventDefault();const a=new FormData;a.append("name",n.name),n.image&&a.append("image",n.image),s?(a.append("_method","PUT"),f.post(route("categories.update",s.id),a,{forceFormData:!0})):f.post(route("categories.store"),a,{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx(D,{}),e.jsx(C,{title:s?"Edit Category":"Add Category"}),e.jsx("main",{className:"app-content p-lg-5 inventory-category",children:e.jsx("div",{className:"product-category-form mt-4",children:e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"row align-items-center mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("label",{className:"form-label",children:"Category Name*"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsx("input",{type:"text",className:"form-control in-prod-name",placeholder:"Category Name",value:n.name,onChange:l=>o("name",l.target.value)}),m.name&&e.jsx("div",{className:"error-msg text-danger mt-1",children:m.name})]})]}),e.jsxs("div",{className:"row align-items-center mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("label",{className:"form-label",children:"Category Image"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsxs("div",{className:"main_full",children:[e.jsx("div",{className:"panel",children:e.jsxs("div",{className:"button_outer",ref:i,children:[!r&&e.jsxs("div",{className:"btn_upload mb-2",children:[e.jsx("input",{type:"file",id:"upload_file",ref:d,onChange:j,accept:"image/*"}),"Upload Image"]}),u&&e.jsx("div",{className:"processing_bar",style:{width:`${u.percentage}%`}}),e.jsx("div",{className:"success_box"})]})}),r?e.jsxs("div",{className:"uploaded_file_view show",id:"uploaded_view",ref:x,children:[e.jsx("img",{src:r,alt:"preview",className:"mb-3"}),e.jsx("span",{className:"file_remove",onClick:v,children:"X"})]}):e.jsx("img",{src:"/assets/img/icons/upload-file.png",alt:"upload-file",className:"mb-3",style:{maxHeight:"100px"}})]}),e.jsx("div",{className:"error-msg text-danger mt-1",children:g||m.image})]})]}),e.jsx("div",{className:"varient-btn d-flex justify-content-end gap-2",children:e.jsx("button",{type:"submit",className:"border-0 common_btn done-btn",children:s?"Update":"Save"})})]})})})]})}export{$ as default};
