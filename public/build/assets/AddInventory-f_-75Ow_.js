import{r as t,q as w,v as z,j as e,$ as C,m as g}from"./app-hkHtsVWY.js";import I from"./Header-B2u-Ke0U.js";import F from"./Sidebar-2qtfisrx.js";import"./Dropdown-DJHpTJ5L.js";import"./transition-BTqLGtpx.js";function T({inventory:s,categories:h}){const o=t.useRef(),r=t.useRef(),x=t.useRef(),[m,n]=t.useState(s!=null&&s.image?`/uploads/${s.image}`:null),[j,u]=t.useState(""),{errors:i}=w().props,{data:c,setData:d,progress:p}=z({name:(s==null?void 0:s.name)||"",image:null,size:(s==null?void 0:s.size)||"",size_unit:(s==null?void 0:s.size_unit)||"Feet",weight:(s==null?void 0:s.weight)||"",weight_unit:(s==null?void 0:s.weight_unit)||"Kg/Each",category_id:(s==null?void 0:s.category_id)||""}),N=a=>{const l=a.target.files[0];if(!l)return;const b=l.name.split(".").pop().toLowerCase();if(!["gif","png","jpg","jpeg"].includes(b)){u("Not an image...");return}u(""),d("image",l),r.current.classList.add("file_uploading"),setTimeout(()=>{r.current.classList.add("file_uploaded")},500);const _=URL.createObjectURL(l);setTimeout(()=>{n(_)},500)},f=()=>{n(null),d("image",null),o.current.value=null,r.current.classList.remove("file_uploading","file_uploaded")},v=a=>{a.preventDefault();const l=new FormData;l.append("name",c.name),l.append("category_id",c.category_id),l.append("size",c.size),l.append("size_unit",c.size_unit),l.append("weight",c.weight),l.append("weight_unit",c.weight_unit),c.image&&l.append("image",c.image),s?(l.append("_method","PUT"),g.post(route("inventory.update",s.id),l,{forceFormData:!0})):g.post(route("inventory.store"),l,{forceFormData:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:s?"Edit Inventory":"Add Inventory"}),e.jsx(I,{}),e.jsx(F,{}),e.jsx("main",{className:"app-content p-lg-5 inventory-category",children:e.jsx("div",{className:"product-category-form mt-4",children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"row align-items-center mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("label",{className:"form-label",children:"Category"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsxs("select",{className:"form-select",value:c.category_id,onChange:a=>d("category_id",a.target.value),children:[e.jsx("option",{value:"",children:"Select a category"}),h.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),i.category_id&&e.jsx("div",{className:"error-msg text-danger mt-1",children:i.category_id})]})]}),e.jsxs("div",{className:"row align-items-center mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("label",{className:"form-label",children:"Product Name"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsx("input",{type:"text",className:"form-control in-prod-name",placeholder:"Product Name",value:c.name,onChange:a=>d("name",a.target.value)}),i.name&&e.jsx("div",{className:"error-msg text-danger mt-1",children:i.name})]})]}),e.jsxs("div",{className:"row align-items-center mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("label",{className:"form-label",children:"Product Image"})}),e.jsxs("div",{className:"col-md-9",children:[e.jsxs("div",{className:"main_full",children:[e.jsx("div",{className:"panel",children:e.jsxs("div",{className:"button_outer",ref:r,children:[!m&&e.jsxs("div",{className:"btn_upload mb-2",children:[e.jsx("input",{type:"file",id:"upload_file",ref:o,onChange:N,accept:"image/*"}),"Upload Image"]}),p&&e.jsx("div",{className:"processing_bar",style:{width:`${p.percentage}%`}}),e.jsx("div",{className:"success_box"})]})}),m?e.jsxs("div",{className:"uploaded_file_view show",id:"uploaded_view",ref:x,children:[e.jsx("img",{src:m,alt:"preview",className:"mb-3"}),e.jsx("span",{className:"file_remove",onClick:f,children:"X"})]}):e.jsx("img",{src:"/assets/img/icons/upload-file.png",alt:"upload-file",className:"mb-3",style:{maxHeight:"100px"}})]}),e.jsx("div",{className:" text-danger mt-1",children:j||i.image})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("label",{className:"form-label mb-0",children:"Product Variant"})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"row  variant-outer rounded-4 p-3 p-md-3 p-lg-4 mb-3 border",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"prod-variant",children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-12 col-md-2",children:e.jsx("label",{className:"form-label mb-0 mt-2 pt-1",children:"Size"})}),e.jsxs("div",{className:"col-6 col-md-5",children:[e.jsx("input",{type:"text",className:"form-control",value:c.size,onChange:a=>d("size",a.target.value)}),i.size&&e.jsx("div",{className:"error-msg text-danger mt-1",children:i.size})]}),e.jsx("div",{className:"col-6 col-md-5",children:e.jsxs("select",{className:"form-select",value:c.size_unit,onChange:a=>d("size_unit",a.target.value),children:[e.jsx("option",{value:"Feet",children:"Feet"}),e.jsx("option",{value:"Meter",children:"Meter"}),e.jsx("option",{value:"Inch",children:"Inch"})]})})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"prod-variant",children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-12 col-md-3",children:e.jsx("label",{className:"form-label mb-0 mt-2 pt-1",children:"Weight"})}),e.jsxs("div",{className:"col-6 col-md-4",children:[e.jsx("input",{type:"text",className:"form-control",value:c.weight,onChange:a=>d("weight",a.target.value)}),i.weight&&e.jsx("div",{className:"error-msg text-danger mt-1",children:i.size})]}),e.jsx("div",{className:"col-6 col-md-5",children:e.jsxs("select",{className:"form-select",value:c.weight_unit,onChange:a=>d("weight_unit",a.target.value),children:[e.jsx("option",{value:"Kg/Each",children:"Kg/Each"}),e.jsx("option",{value:"Gram",children:"Gram"}),e.jsx("option",{value:"Ton",children:"Ton"})]})})]})})})]})})]}),e.jsx("div",{className:"varient-btn d-flex justify-content-end gap-2",children:e.jsx("button",{type:"submit",className:"border-0 common_btn done-btn",children:s?"Update":"Save"})})]})})})]})}export{T as default};
