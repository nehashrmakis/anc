import{router as dt}from"@inertiajs/core";import{router as Ae,setupProgress as we}from"@inertiajs/core";import{createElement as Oe}from"react";import{createHeadManager as De,router as ue}from"@inertiajs/core";import{createElement as O,useEffect as Ie,useMemo as Ee,useState as ke}from"react";import{createContext as Re}from"react";var ie=Re(void 0);ie.displayName="InertiaHeadContext";var K=ie;import{createContext as xe}from"react";var pe=xe(void 0);pe.displayName="InertiaPageContext";var B=pe;function _({children:s,initialPage:t,initialComponent:a,resolveComponent:p,titleCallback:i,onHeadUpdate:g}){let[u,f]=ke({component:a||null,page:t,key:null}),c=Ee(()=>De(typeof window>"u",i||(l=>l),g||(()=>{})),[]);if(Ie(()=>{ue.init({initialPage:t,resolveComponent:p,swapComponent:async({component:l,page:e,preserveState:d})=>{f(r=>({component:l,page:e,key:d?r.key:Date.now()}))}}),ue.on("navigate",()=>c.forceUpdate())},[]),!u.component)return O(K.Provider,{value:c},O(B.Provider,{value:u.page},null));let m=s||(({Component:l,props:e,key:d})=>{let r=O(l,{key:d,...e});return typeof l.layout=="function"?l.layout(r):Array.isArray(l.layout)?l.layout.concat(r).reverse().reduce((h,F)=>O(F,{children:h,...e})):r});return O(K.Provider,{value:c},O(B.Provider,{value:u.page},m({Component:u.component,key:u.key,props:u.page.props})))}_.displayName="Inertia";async function ce({id:s="app",resolve:t,setup:a,title:p,progress:i={},page:g,render:u}){let f=typeof window>"u",c=f?null:document.getElementById(s),m=g||JSON.parse(c.dataset.page),l=r=>Promise.resolve(t(r)).then(h=>h.default||h),e=[],d=await Promise.all([l(m.component),Ae.decryptHistory().catch(()=>{})]).then(([r])=>a({el:c,App:_,props:{initialPage:m,initialComponent:r,resolveComponent:l,titleCallback:p,onHeadUpdate:f?h=>e=h:null}}));if(!f&&i&&we(i),f){let r=await u(Oe("div",{id:s,"data-page":JSON.stringify(m)},d));return{head:e,body:r}}}import{useEffect as le,useMemo as Le,useState as He}from"react";import{useContext as Me}from"react";function q(){let s=Me(B);if(!s)throw new Error("usePage must be used within the Inertia component");return s}var de=s=>(s=new URL(s.href),s.hash="",s),Ke=(s,t)=>de(s).href===de(t).href,fe=({children:s,data:t,fallback:a})=>{if(!t)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[p,i]=He(!1),g=q().props,u=Le(()=>Array.isArray(t)?t:[t],[t]);return le(()=>{let f=me.on("start",c=>{let m=c.detail.visit.only.length>0||c.detail.visit.except.length>0,l=c.detail.visit.only.find(e=>u.includes(e));Ke(c.detail.visit.url,window.location)&&(!m||l)&&i(!1)});return()=>{f()}},[]),le(()=>{i(u.every(f=>g[f]!==void 0))},[g,u]),p?s:a};fe.displayName="InertiaDeferred";var Be=fe;import ge,{useContext as Ve,useEffect as Ue,useMemo as Ne}from"react";var je=function({children:s,title:t}){let a=Ve(K),p=Ne(()=>a.createProvider(),[a]);Ue(()=>()=>{p.disconnect()},[p]);function i(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function g(e){let d=Object.keys(e.props).reduce((r,h)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(h))return r;let F=e.props[h];return F===""?r+` ${h}`:r+` ${h}="${F}"`},"");return`<${e.type}${d}>`}function u(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((d,r)=>d+f(r),"")}function f(e){let d=g(e);return e.props.children&&(d+=u(e)),e.props.dangerouslySetInnerHTML&&(d+=e.props.dangerouslySetInnerHTML.__html),i(e)||(d+=`</${e.type}>`),d}function c(e){return ge.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function m(e){return f(c(e))}function l(e){let d=ge.Children.toArray(e).filter(r=>r).map(r=>m(r));return t&&!d.find(r=>r.startsWith("<title"))&&d.push(`<title inertia>${t}</title>`),d}return p.update(l(s)),null},$e=je;import{mergeDataIntoQueryString as We,router as re,shouldIntercept as oe}from"@inertiajs/core";import{createElement as _e,forwardRef as qe,useEffect as Pe,useMemo as ye,useRef as Je,useState as Qe}from"react";var x=()=>{},he=qe(({children:s,as:t="a",data:a={},href:p,method:i="get",preserveScroll:g=!1,preserveState:u=null,replace:f=!1,only:c=[],except:m=[],headers:l={},queryStringArrayFormat:e="brackets",async:d=!1,onClick:r=x,onCancelToken:h=x,onBefore:F=x,onStart:I=x,onProgress:E=x,onFinish:Y=x,onCancel:N=x,onSuccess:z=x,onError:M=x,prefetch:v=!1,cacheFor:b=0,...G},X)=>{let[Z,j]=Qe(0),L=Je(null);t=t.toLowerCase(),i=typeof p=="object"?p.method:i.toLowerCase();let[k,ee]=We(i,typeof p=="object"?p.url:p||"",a,e),A=k;a=ee;let $={data:a,method:i,preserveScroll:g,preserveState:u??i!=="get",replace:f,only:c,except:m,headers:l,async:d},W={...$,onCancelToken:h,onBefore:F,onStart(o){j(w=>w+1),I(o)},onProgress:E,onFinish(o){j(w=>w-1),Y(o)},onCancel:N,onSuccess:z,onError:M},H=()=>{re.prefetch(A,$,{cacheFor:te})},R=ye(()=>v===!0?["hover"]:v===!1?[]:Array.isArray(v)?v:[v],Array.isArray(v)?v:[v]),te=ye(()=>b!==0?b:R.length===1&&R[0]==="click"?0:3e4,[b,R]);Pe(()=>()=>{clearTimeout(L.current)},[]),Pe(()=>{R.includes("mount")&&setTimeout(()=>H())},R);let n={onClick:o=>{r(o),oe(o)&&(o.preventDefault(),re.visit(A,W))}},y={onMouseEnter:()=>{L.current=window.setTimeout(()=>{H()},75)},onMouseLeave:()=>{clearTimeout(L.current)},onClick:n.onClick},P={onMouseDown:o=>{oe(o)&&(o.preventDefault(),H())},onMouseUp:o=>{o.preventDefault(),re.visit(A,W)},onClick:o=>{r(o),oe(o)&&o.preventDefault()}};return i!=="get"&&(t="button"),_e(t,{...G,...{a:{href:A},button:{type:"button"}}[t]||{},ref:X,...R.includes("hover")?y:R.includes("click")?P:n,"data-loading":Z>0?"":void 0},s)});he.displayName="InertiaLink";var Ye=he;import{router as Se}from"@inertiajs/core";import{cloneDeep as J,isEqual as Xe}from"es-toolkit";import{get as Ze,has as et,set as ne}from"es-toolkit/compat";import{useCallback as T,useEffect as tt,useRef as Q,useState as D}from"react";import{router as Fe}from"@inertiajs/core";import{useEffect as ze,useState as Ge}from"react";function V(s,t){let[a,p]=Ge(()=>{let i=Fe.restore(t);return i!==void 0?i:s});return ze(()=>{Fe.remember(a,t)},[a,t]),[a,p]}function ve(s,t){let a=Q(null),p=typeof s=="string"?s:null,[i,g]=D((typeof s=="string"?t:s)||{}),u=Q(null),f=Q(null),[c,m]=p?V(i,`${p}:data`):D(i),[l,e]=p?V({},`${p}:errors`):D({}),[d,r]=D(!1),[h,F]=D(!1),[I,E]=D(null),[Y,N]=D(!1),[z,M]=D(!1),v=Q(n=>n);tt(()=>(a.current=!0,()=>{a.current=!1}),[]);let b=T((...n)=>{let y=typeof n[0]=="object",P=y?n[0].method:n[0],C=y?n[0].url:n[1],o=(y?n[1]:n[2])??{},w={...o,onCancelToken:S=>{if(u.current=S,o.onCancelToken)return o.onCancelToken(S)},onBefore:S=>{if(N(!1),M(!1),clearTimeout(f.current),o.onBefore)return o.onBefore(S)},onStart:S=>{if(F(!0),o.onStart)return o.onStart(S)},onProgress:S=>{if(E(S),o.onProgress)return o.onProgress(S)},onSuccess:S=>{if(a.current&&(F(!1),E(null),e({}),r(!1),N(!0),M(!0),g(J(c)),f.current=setTimeout(()=>{a.current&&M(!1)},2e3)),o.onSuccess)return o.onSuccess(S)},onError:S=>{if(a.current&&(F(!1),E(null),e(S),r(!0)),o.onError)return o.onError(S)},onCancel:()=>{if(a.current&&(F(!1),E(null)),o.onCancel)return o.onCancel()},onFinish:S=>{if(a.current&&(F(!1),E(null)),u.current=null,o.onFinish)return o.onFinish(S)}};P==="delete"?Se.delete(C,{...w,data:v.current(c)}):Se[P](C,v.current(c),w)},[c,e,v]),G=T((n,y)=>{m(typeof n=="string"?P=>ne(J(P),n,y):typeof n=="function"?P=>n(P):n)},[m]),X=T((n,y)=>{g(typeof n>"u"?()=>c:P=>typeof n=="string"?ne(J(P),n,y):Object.assign(J(P),n))},[c,g]),Z=T((...n)=>{n.length===0?m(i):m(y=>n.filter(P=>et(i,P)).reduce((P,C)=>ne(P,C,Ze(i,C)),{...y}))},[m,i]),j=T((n,y)=>{e(P=>{let C={...P,...typeof n=="string"?{[n]:y}:n};return r(Object.keys(C).length>0),C})},[e,r]),L=T((...n)=>{e(y=>{let P=Object.keys(y).reduce((C,o)=>({...C,...n.length>0&&!n.includes(o)?{[o]:y[o]}:{}}),{});return r(Object.keys(P).length>0),P})},[e,r]),k=n=>(y,P)=>{b(n,y,P)},ee=T(k("get"),[b]),A=T(k("post"),[b]),$=T(k("put"),[b]),W=T(k("patch"),[b]),H=T(k("delete"),[b]),R=T(()=>{u.current&&u.current.cancel()},[]),te=T(n=>{v.current=n},[]);return{data:c,setData:G,isDirty:!Xe(c,i),errors:l,hasErrors:d,processing:h,progress:I,wasSuccessful:Y,recentlySuccessful:z,transform:te,setDefaults:X,reset:Z,setError:j,clearErrors:L,submit:b,get:ee,post:A,put:$,patch:W,delete:H,cancel:R}}import{router as rt}from"@inertiajs/core";import{useEffect as ot,useRef as nt}from"react";function Te(s,t={},a={keepAlive:!1,autoStart:!0}){let p=nt(rt.poll(s,t,{...a,autoStart:!1}));return ot(()=>((a.autoStart??!0)&&p.current.start(),()=>p.current.stop()),[]),{stop:p.current.stop,start:p.current.start}}import{router as U}from"@inertiajs/core";import{useEffect as st,useState as se}from"react";function be(s={}){let t=typeof window>"u"?null:U.getCached(window.location.pathname,s),a=typeof window>"u"?null:U.getPrefetching(window.location.pathname,s),[p,i]=se(t?.staleTimestamp||null),[g,u]=se(a!==null),[f,c]=se(t!==null);return st(()=>{let m=U.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&u(!0)}),l=U.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(u(!1),c(!0),i(e.detail.fetchedAt))});return()=>{l(),m()}},[]),{lastUpdatedAt:p,isPrefetching:g,isPrefetched:f,flush:()=>U.flush(window.location.pathname,s)}}import{router as at}from"@inertiajs/core";import{createElement as it,useCallback as pt,useEffect as ut,useRef as ae,useState as ct}from"react";var Ce=({children:s,data:t,params:a,buffer:p,as:i,always:g,fallback:u})=>{g=g??!1,i=i??"div",u=u??null;let[f,c]=ct(!1),m=ae(!1),l=ae(!1),e=ae(null),d=pt(()=>{if(t)return{only:Array.isArray(t)?t:[t]};if(!a)throw new Error("You must provide either a `data` or `params` prop.");return a},[a,t]);return ut(()=>{if(!e.current)return;let r=new IntersectionObserver(h=>{if(!h[0].isIntersecting||(!g&&m.current&&r.disconnect(),l.current))return;m.current=!0,l.current=!0;let F=d();at.reload({...F,onStart:I=>{l.current=!0,F.onStart?.(I)},onFinish:I=>{c(!0),l.current=!1,F.onFinish?.(I),g||r.disconnect()}})},{rootMargin:`${p||0}px`});return r.observe(e.current),()=>{r.disconnect()}},[e,d,p]),g||!f?it(i,{props:null,ref:e},f?s:u):f?s:null};Ce.displayName="InertiaWhenVisible";var lt=Ce;var me=dt;export{Be as Deferred,$e as Head,Ye as Link,lt as WhenVisible,ce as createInertiaApp,me as router,ve as useForm,q as usePage,Te as usePoll,be as usePrefetch,V as useRemember};
//# sourceMappingURL=index.esm.js.map
